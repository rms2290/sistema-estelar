<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-calendar-alt"></i> Agenda
        </h3>
        <div class="card-tools">
            <a href="{% url 'notas:listar_agenda_entregas' %}" class="btn btn-tool">
                <i class="fas fa-external-link-alt"></i>
            </a>
        </div>
    </div>
    
    <div class="card-body">
        <!-- Estatísticas rápidas -->
        <div class="row mb-3">
            <div class="col-6">
                <div class="info-box bg-warning">
                    <span class="info-box-icon">
                        <i class="fas fa-calendar-check"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Agendadas</span>
                        <span class="info-box-number">{{ total_agendadas }}</span>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="info-box bg-primary">
                    <span class="info-box-icon">
                        <i class="fas fa-truck-loading"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Em Andamento</span>
                        <span class="info-box-number">{{ total_em_andamento }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Entregas de hoje -->
        {% if entregas_hoje %}
        <div class="mb-3">
            <h6 class="text-primary">
                <i class="fas fa-calendar-alt"></i> Entregas de Hoje ({{ hoje|date:"d/m/Y" }})
            </h6>
            <div class="list-group">
                {% for entrega in entregas_hoje %}
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ entrega.cliente.razao_social }}</strong>
                        <br>
                        <small class="text-muted">
                            {{ entrega.empresa_entrega }} - {{ entrega.quantidade }} {{ entrega.volume }}
                        </small>
                    </div>
                    <span class="badge badge-primary">{{ entrega.get_status_display }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <!-- Próximas entregas -->
        {% if proximas_entregas %}
        <div>
            <h6 class="text-info">
                <i class="fas fa-calendar-plus"></i> Próximas Entregas (7 dias)
            </h6>
            <div class="list-group">
                {% for entrega in proximas_entregas %}
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ entrega.cliente.razao_social }}</strong>
                        <br>
                        <small class="text-muted">
                            {{ entrega.data_entrega|date:"d/m/Y" }} - {{ entrega.empresa_entrega }}
                        </small>
                        <br>
                        <small class="text-muted">
                            {{ entrega.quantidade }} {{ entrega.volume }}
                        </small>
                    </div>
                    <div class="text-right">
                        {% if entrega.status == 'Agendada' %}
                            <span class="badge badge-warning">{{ entrega.get_status_display }}</span>
                        {% elif entrega.status == 'Em Andamento' %}
                            <span class="badge badge-primary">{{ entrega.get_status_display }}</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <!-- Mensagem quando não há entregas -->
        {% if not entregas_hoje and not proximas_entregas %}
        <div class="text-center text-muted">
            <i class="fas fa-calendar-times fa-2x mb-2"></i>
            <p>Nenhuma entrega agendada para os próximos dias.</p>
        </div>
        {% endif %}
        
        <!-- Botão para adicionar nova entrega -->
        <div class="mt-3 text-center">
            <a href="{% url 'notas:adicionar_agenda_entrega' %}" class="btn btn-primary btn-sm">
                <i class="fas fa-plus"></i> Agendar Nova Entrega
            </a>
        </div>
    </div>
</div>
